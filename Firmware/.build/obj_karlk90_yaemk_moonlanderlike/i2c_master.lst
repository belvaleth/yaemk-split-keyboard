   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 23, 1
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 2
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 2
  11              		.file	"i2c_master.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.i2c_init,"ax",%progbits
  16              		.align	1
  17              		.p2align 2,,3
  18              		.weak	i2c_init
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	i2c_init:
  26              	.LFB296:
  27              		.file 1 "platforms/chibios/drivers/i2c_master.c"
   1:platforms/chibios/drivers/i2c_master.c **** /* Copyright 2018 Jack Humbert
   2:platforms/chibios/drivers/i2c_master.c ****  * Copyright 2018 Yiancar
   3:platforms/chibios/drivers/i2c_master.c ****  *
   4:platforms/chibios/drivers/i2c_master.c ****  * This program is free software: you can redistribute it and/or modify
   5:platforms/chibios/drivers/i2c_master.c ****  * it under the terms of the GNU General Public License as published by
   6:platforms/chibios/drivers/i2c_master.c ****  * the Free Software Foundation, either version 2 of the License, or
   7:platforms/chibios/drivers/i2c_master.c ****  * (at your option) any later version.
   8:platforms/chibios/drivers/i2c_master.c ****  *
   9:platforms/chibios/drivers/i2c_master.c ****  * This program is distributed in the hope that it will be useful,
  10:platforms/chibios/drivers/i2c_master.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:platforms/chibios/drivers/i2c_master.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:platforms/chibios/drivers/i2c_master.c ****  * GNU General Public License for more details.
  13:platforms/chibios/drivers/i2c_master.c ****  *
  14:platforms/chibios/drivers/i2c_master.c ****  * You should have received a copy of the GNU General Public License
  15:platforms/chibios/drivers/i2c_master.c ****  * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:platforms/chibios/drivers/i2c_master.c ****  */
  17:platforms/chibios/drivers/i2c_master.c **** 
  18:platforms/chibios/drivers/i2c_master.c **** /* This library is only valid for STM32 processors.
  19:platforms/chibios/drivers/i2c_master.c ****  * This library follows the convention of the AVR i2c_master library.
  20:platforms/chibios/drivers/i2c_master.c ****  * As a result addresses are expected to be already shifted (addr << 1).
  21:platforms/chibios/drivers/i2c_master.c ****  * I2CD1 is the default driver which corresponds to pins B6 and B7. This
  22:platforms/chibios/drivers/i2c_master.c ****  * can be changed.
  23:platforms/chibios/drivers/i2c_master.c ****  * Please ensure that HAL_USE_I2C is TRUE in the halconf.h file and that
  24:platforms/chibios/drivers/i2c_master.c ****  * STM32_I2C_USE_I2C1 is TRUE in the mcuconf.h file. Pins B6 and B7 are used
  25:platforms/chibios/drivers/i2c_master.c ****  * but using any other I2C pins should be trivial.
  26:platforms/chibios/drivers/i2c_master.c ****  */
  27:platforms/chibios/drivers/i2c_master.c **** #include "quantum.h"
  28:platforms/chibios/drivers/i2c_master.c **** #include "i2c_master.h"
  29:platforms/chibios/drivers/i2c_master.c **** #include <string.h>
  30:platforms/chibios/drivers/i2c_master.c **** #include <hal.h>
  31:platforms/chibios/drivers/i2c_master.c **** 
  32:platforms/chibios/drivers/i2c_master.c **** static uint8_t i2c_address;
  33:platforms/chibios/drivers/i2c_master.c **** 
  34:platforms/chibios/drivers/i2c_master.c **** static const I2CConfig i2cconfig = {
  35:platforms/chibios/drivers/i2c_master.c **** #if defined(USE_I2CV1_CONTRIB)
  36:platforms/chibios/drivers/i2c_master.c ****     I2C1_CLOCK_SPEED,
  37:platforms/chibios/drivers/i2c_master.c **** #elif defined(USE_I2CV1)
  38:platforms/chibios/drivers/i2c_master.c ****     I2C1_OPMODE,
  39:platforms/chibios/drivers/i2c_master.c ****     I2C1_CLOCK_SPEED,
  40:platforms/chibios/drivers/i2c_master.c ****     I2C1_DUTY_CYCLE,
  41:platforms/chibios/drivers/i2c_master.c **** #else
  42:platforms/chibios/drivers/i2c_master.c ****     // This configures the I2C clock to 400khz assuming a 72Mhz clock
  43:platforms/chibios/drivers/i2c_master.c ****     // For more info : https://www.st.com/en/embedded-software/stsw-stm32126.html
  44:platforms/chibios/drivers/i2c_master.c ****     STM32_TIMINGR_PRESC(I2C1_TIMINGR_PRESC) | STM32_TIMINGR_SCLDEL(I2C1_TIMINGR_SCLDEL) | STM32_TIM
  45:platforms/chibios/drivers/i2c_master.c **** #endif
  46:platforms/chibios/drivers/i2c_master.c **** };
  47:platforms/chibios/drivers/i2c_master.c **** 
  48:platforms/chibios/drivers/i2c_master.c **** static i2c_status_t chibios_to_qmk(const msg_t* status) {
  49:platforms/chibios/drivers/i2c_master.c ****     switch (*status) {
  50:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
  51:platforms/chibios/drivers/i2c_master.c ****             return I2C_STATUS_SUCCESS;
  52:platforms/chibios/drivers/i2c_master.c ****         case I2C_TIMEOUT:
  53:platforms/chibios/drivers/i2c_master.c ****             return I2C_STATUS_TIMEOUT;
  54:platforms/chibios/drivers/i2c_master.c ****         // I2C_BUS_ERROR, I2C_ARBITRATION_LOST, I2C_ACK_FAILURE, I2C_OVERRUN, I2C_PEC_ERROR, I2C_SM
  55:platforms/chibios/drivers/i2c_master.c ****         default:
  56:platforms/chibios/drivers/i2c_master.c ****             return I2C_STATUS_ERROR;
  57:platforms/chibios/drivers/i2c_master.c ****     }
  58:platforms/chibios/drivers/i2c_master.c **** }
  59:platforms/chibios/drivers/i2c_master.c **** 
  60:platforms/chibios/drivers/i2c_master.c **** __attribute__((weak)) void i2c_init(void) {
  28              		.loc 1 60 43 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  61:platforms/chibios/drivers/i2c_master.c ****     static bool is_initialised = false;
  32              		.loc 1 61 5 view .LVU1
  62:platforms/chibios/drivers/i2c_master.c ****     if (!is_initialised) {
  33              		.loc 1 62 5 view .LVU2
  34              		.loc 1 62 9 is_stmt 0 view .LVU3
  35 0000 104B     		ldr	r3, .L6
  60:platforms/chibios/drivers/i2c_master.c ****     static bool is_initialised = false;
  36              		.loc 1 60 43 view .LVU4
  37 0002 10B5     		push	{r4, lr}
  38              		.cfi_def_cfa_offset 8
  39              		.cfi_offset 4, -8
  40              		.cfi_offset 14, -4
  41              		.loc 1 62 8 view .LVU5
  42 0004 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
  43 0006 04B1     		cbz	r4, .L5
  63:platforms/chibios/drivers/i2c_master.c ****         is_initialised = true;
  64:platforms/chibios/drivers/i2c_master.c **** 
  65:platforms/chibios/drivers/i2c_master.c ****         // Try releasing special pins for a short time
  66:platforms/chibios/drivers/i2c_master.c ****         palSetLineMode(I2C1_SCL_PIN, PAL_MODE_INPUT);
  67:platforms/chibios/drivers/i2c_master.c ****         palSetLineMode(I2C1_SDA_PIN, PAL_MODE_INPUT);
  68:platforms/chibios/drivers/i2c_master.c **** 
  69:platforms/chibios/drivers/i2c_master.c ****         chThdSleepMilliseconds(10);
  70:platforms/chibios/drivers/i2c_master.c **** #if defined(USE_GPIOV1)
  71:platforms/chibios/drivers/i2c_master.c ****         palSetLineMode(I2C1_SCL_PIN, I2C1_SCL_PAL_MODE);
  72:platforms/chibios/drivers/i2c_master.c ****         palSetLineMode(I2C1_SDA_PIN, I2C1_SDA_PAL_MODE);
  73:platforms/chibios/drivers/i2c_master.c **** #else
  74:platforms/chibios/drivers/i2c_master.c ****         palSetLineMode(I2C1_SCL_PIN, PAL_MODE_ALTERNATE(I2C1_SCL_PAL_MODE) | PAL_OUTPUT_TYPE_OPENDR
  75:platforms/chibios/drivers/i2c_master.c ****         palSetLineMode(I2C1_SDA_PIN, PAL_MODE_ALTERNATE(I2C1_SDA_PAL_MODE) | PAL_OUTPUT_TYPE_OPENDR
  76:platforms/chibios/drivers/i2c_master.c **** #endif
  77:platforms/chibios/drivers/i2c_master.c ****     }
  78:platforms/chibios/drivers/i2c_master.c **** }
  44              		.loc 1 78 1 view .LVU6
  45 0008 10BD     		pop	{r4, pc}
  46              	.L5:
  63:platforms/chibios/drivers/i2c_master.c ****         is_initialised = true;
  47              		.loc 1 63 9 is_stmt 1 view .LVU7
  63:platforms/chibios/drivers/i2c_master.c ****         is_initialised = true;
  48              		.loc 1 63 24 is_stmt 0 view .LVU8
  49 000a 0122     		movs	r2, #1
  50 000c 1A70     		strb	r2, [r3]
  66:platforms/chibios/drivers/i2c_master.c ****         palSetLineMode(I2C1_SDA_PIN, PAL_MODE_INPUT);
  51              		.loc 1 66 9 is_stmt 1 view .LVU9
  52 000e 0E48     		ldr	r0, .L6+4
  53 0010 2246     		mov	r2, r4
  54 0012 4021     		movs	r1, #64
  55 0014 FFF7FEFF 		bl	_pal_lld_setgroupmode
  56              	.LVL0:
  67:platforms/chibios/drivers/i2c_master.c **** 
  57              		.loc 1 67 9 view .LVU10
  58 0018 2246     		mov	r2, r4
  59 001a 8021     		movs	r1, #128
  60 001c 0A48     		ldr	r0, .L6+4
  61 001e FFF7FEFF 		bl	_pal_lld_setgroupmode
  62              	.LVL1:
  69:platforms/chibios/drivers/i2c_master.c **** #if defined(USE_GPIOV1)
  63              		.loc 1 69 9 view .LVU11
  64 0022 6420     		movs	r0, #100
  65 0024 FFF7FEFF 		bl	chThdSleep
  66              	.LVL2:
  74:platforms/chibios/drivers/i2c_master.c ****         palSetLineMode(I2C1_SDA_PIN, PAL_MODE_ALTERNATE(I2C1_SDA_PAL_MODE) | PAL_OUTPUT_TYPE_OPENDR
  67              		.loc 1 74 9 view .LVU12
  68 0028 0748     		ldr	r0, .L6+4
  69 002a 40F20622 		movw	r2, #518
  70 002e 4021     		movs	r1, #64
  71 0030 FFF7FEFF 		bl	_pal_lld_setgroupmode
  72              	.LVL3:
  75:platforms/chibios/drivers/i2c_master.c **** #endif
  73              		.loc 1 75 9 view .LVU13
  74              		.loc 1 78 1 is_stmt 0 view .LVU14
  75 0034 BDE81040 		pop	{r4, lr}
  76              		.cfi_restore 14
  77              		.cfi_restore 4
  78              		.cfi_def_cfa_offset 0
  75:platforms/chibios/drivers/i2c_master.c **** #endif
  79              		.loc 1 75 9 view .LVU15
  80 0038 0348     		ldr	r0, .L6+4
  81 003a 40F20622 		movw	r2, #518
  82 003e 8021     		movs	r1, #128
  83 0040 FFF7FEBF 		b	_pal_lld_setgroupmode
  84              	.LVL4:
  85              	.L7:
  86              		.align	2
  87              	.L6:
  88 0044 00000000 		.word	.LANCHOR0
  89 0048 00040048 		.word	1207960576
  90              		.cfi_endproc
  91              	.LFE296:
  93              		.section	.text.i2c_start,"ax",%progbits
  94              		.align	1
  95              		.p2align 2,,3
  96              		.global	i2c_start
  97              		.syntax unified
  98              		.thumb
  99              		.thumb_func
 100              		.fpu fpv4-sp-d16
 102              	i2c_start:
 103              	.LVL5:
 104              	.LFB297:
  79:platforms/chibios/drivers/i2c_master.c **** 
  80:platforms/chibios/drivers/i2c_master.c **** i2c_status_t i2c_start(uint8_t address) {
 105              		.loc 1 80 41 is_stmt 1 view -0
 106              		.cfi_startproc
 107              		@ args = 0, pretend = 0, frame = 0
 108              		@ frame_needed = 0, uses_anonymous_args = 0
  81:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 109              		.loc 1 81 5 view .LVU17
  80:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 110              		.loc 1 80 41 is_stmt 0 view .LVU18
 111 0000 08B5     		push	{r3, lr}
 112              		.cfi_def_cfa_offset 8
 113              		.cfi_offset 3, -8
 114              		.cfi_offset 14, -4
 115              		.loc 1 81 17 view .LVU19
 116 0002 044B     		ldr	r3, .L10
  82:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 117              		.loc 1 82 5 view .LVU20
 118 0004 0449     		ldr	r1, .L10+4
  80:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 119              		.loc 1 80 41 view .LVU21
 120 0006 0246     		mov	r2, r0
 121              		.loc 1 82 5 view .LVU22
 122 0008 0448     		ldr	r0, .L10+8
 123              	.LVL6:
  81:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 124              		.loc 1 81 17 view .LVU23
 125 000a 1A70     		strb	r2, [r3]
 126              		.loc 1 82 5 is_stmt 1 view .LVU24
 127 000c FFF7FEFF 		bl	i2cStart
 128              	.LVL7:
  83:platforms/chibios/drivers/i2c_master.c ****     return I2C_STATUS_SUCCESS;
 129              		.loc 1 83 5 view .LVU25
  84:platforms/chibios/drivers/i2c_master.c **** }
 130              		.loc 1 84 1 is_stmt 0 view .LVU26
 131 0010 0020     		movs	r0, #0
 132 0012 08BD     		pop	{r3, pc}
 133              	.L11:
 134              		.align	2
 135              	.L10:
 136 0014 00000000 		.word	.LANCHOR1
 137 0018 00000000 		.word	.LANCHOR2
 138 001c 00000000 		.word	I2CD1
 139              		.cfi_endproc
 140              	.LFE297:
 142              		.global	__aeabi_uldivmod
 143              		.global	__aeabi_ldivmod
 144              		.section	.text.i2c_transmit,"ax",%progbits
 145              		.align	1
 146              		.p2align 2,,3
 147              		.global	i2c_transmit
 148              		.syntax unified
 149              		.thumb
 150              		.thumb_func
 151              		.fpu fpv4-sp-d16
 153              	i2c_transmit:
 154              	.LVL8:
 155              	.LFB298:
  85:platforms/chibios/drivers/i2c_master.c **** 
  86:platforms/chibios/drivers/i2c_master.c **** i2c_status_t i2c_transmit(uint8_t address, const uint8_t* data, uint16_t length, uint16_t timeout) 
 156              		.loc 1 86 100 is_stmt 1 view -0
 157              		.cfi_startproc
 158              		@ args = 0, pretend = 0, frame = 0
 159              		@ frame_needed = 0, uses_anonymous_args = 0
  87:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 160              		.loc 1 87 5 view .LVU28
  86:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 161              		.loc 1 86 100 is_stmt 0 view .LVU29
 162 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 163              		.cfi_def_cfa_offset 24
 164              		.cfi_offset 4, -24
 165              		.cfi_offset 5, -20
 166              		.cfi_offset 6, -16
 167              		.cfi_offset 7, -12
 168              		.cfi_offset 8, -8
 169              		.cfi_offset 14, -4
 170              		.loc 1 87 17 view .LVU30
 171 0004 174D     		ldr	r5, .L17
  86:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 172              		.loc 1 86 100 view .LVU31
 173 0006 84B0     		sub	sp, sp, #16
 174              		.cfi_def_cfa_offset 40
 175              		.loc 1 87 17 view .LVU32
 176 0008 2870     		strb	r0, [r5]
  88:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 177              		.loc 1 88 5 is_stmt 1 view .LVU33
  89:platforms/chibios/drivers/i2c_master.c ****     msg_t status = i2cMasterTransmitTimeout(&I2C_DRIVER, (i2c_address >> 1), data, length, 0, 0, TI
 178              		.loc 1 89 98 is_stmt 0 view .LVU34
 179 000a 4FF00008 		mov	r8, #0
  88:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 180              		.loc 1 88 5 view .LVU35
 181 000e 1648     		ldr	r0, .L17+4
 182              	.LVL9:
  86:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 183              		.loc 1 86 100 view .LVU36
 184 0010 0E46     		mov	r6, r1
  88:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 185              		.loc 1 88 5 view .LVU37
 186 0012 1649     		ldr	r1, .L17+8
 187              	.LVL10:
  86:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 188              		.loc 1 86 100 view .LVU38
 189 0014 1746     		mov	r7, r2
 190 0016 1C46     		mov	r4, r3
  88:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 191              		.loc 1 88 5 view .LVU39
 192 0018 FFF7FEFF 		bl	i2cStart
 193              	.LVL11:
 194              		.loc 1 89 5 is_stmt 1 view .LVU40
 195              		.loc 1 89 98 is_stmt 0 view .LVU41
 196 001c 42F21073 		movw	r3, #10000
 197 0020 40F2E730 		movw	r0, #999
 198 0024 4146     		mov	r1, r8
 199 0026 E3FB0401 		umlal	r0, r1, r3, r4
 200 002a 4FF47A72 		mov	r2, #1000
 201 002e 0023     		movs	r3, #0
 202 0030 FFF7FEFF 		bl	__aeabi_uldivmod
 203              	.LVL12:
 204              		.loc 1 89 20 view .LVU42
 205 0034 2D78     		ldrb	r5, [r5]	@ zero_extendqisi2
 206 0036 0290     		str	r0, [sp, #8]
 207 0038 6D08     		lsrs	r5, r5, #1
 208 003a 0B48     		ldr	r0, .L17+4
 209 003c CDF80480 		str	r8, [sp, #4]
 210 0040 CDF80080 		str	r8, [sp]
 211 0044 3B46     		mov	r3, r7
 212 0046 3246     		mov	r2, r6
 213 0048 2946     		mov	r1, r5
 214 004a FFF7FEFF 		bl	i2cMasterTransmitTimeout
 215              	.LVL13:
  90:platforms/chibios/drivers/i2c_master.c ****     return chibios_to_qmk(&status);
 216              		.loc 1 90 5 is_stmt 1 view .LVU43
 217              	.LBB16:
 218              	.LBI16:
  48:platforms/chibios/drivers/i2c_master.c ****     switch (*status) {
 219              		.loc 1 48 21 view .LVU44
 220              	.LBB17:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 221              		.loc 1 49 5 view .LVU45
 222 004e 28B1     		cbz	r0, .L13
 223 0050 2028     		cmp	r0, #32
 224 0052 14BF     		ite	ne
 225 0054 4FF0FF30 		movne	r0, #-1
 226              	.LVL14:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 227              		.loc 1 49 5 is_stmt 0 view .LVU46
 228 0058 6FF00100 		mvneq	r0, #1
 229              	.L13:
 230              	.LVL15:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 231              		.loc 1 49 5 view .LVU47
 232              	.LBE17:
 233              	.LBE16:
  91:platforms/chibios/drivers/i2c_master.c **** }
 234              		.loc 1 91 1 view .LVU48
 235 005c 04B0     		add	sp, sp, #16
 236              		.cfi_def_cfa_offset 24
 237              		@ sp needed
 238 005e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 239              	.LVL16:
 240              	.L18:
 241              		.loc 1 91 1 view .LVU49
 242 0062 00BF     		.align	2
 243              	.L17:
 244 0064 00000000 		.word	.LANCHOR1
 245 0068 00000000 		.word	I2CD1
 246 006c 00000000 		.word	.LANCHOR2
 247              		.cfi_endproc
 248              	.LFE298:
 250              		.section	.text.i2c_receive,"ax",%progbits
 251              		.align	1
 252              		.p2align 2,,3
 253              		.global	i2c_receive
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 257              		.fpu fpv4-sp-d16
 259              	i2c_receive:
 260              	.LVL17:
 261              	.LFB299:
  92:platforms/chibios/drivers/i2c_master.c **** 
  93:platforms/chibios/drivers/i2c_master.c **** i2c_status_t i2c_receive(uint8_t address, uint8_t* data, uint16_t length, uint16_t timeout) {
 262              		.loc 1 93 93 is_stmt 1 view -0
 263              		.cfi_startproc
 264              		@ args = 0, pretend = 0, frame = 0
 265              		@ frame_needed = 0, uses_anonymous_args = 0
  94:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 266              		.loc 1 94 5 view .LVU51
  93:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 267              		.loc 1 93 93 is_stmt 0 view .LVU52
 268 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 269              		.cfi_def_cfa_offset 20
 270              		.cfi_offset 4, -20
 271              		.cfi_offset 5, -16
 272              		.cfi_offset 6, -12
 273              		.cfi_offset 7, -8
 274              		.cfi_offset 14, -4
 275              		.loc 1 94 17 view .LVU53
 276 0002 144D     		ldr	r5, .L24
  93:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 277              		.loc 1 93 93 view .LVU54
 278 0004 83B0     		sub	sp, sp, #12
 279              		.cfi_def_cfa_offset 32
 280              		.loc 1 94 17 view .LVU55
 281 0006 2870     		strb	r0, [r5]
  95:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 282              		.loc 1 95 5 is_stmt 1 view .LVU56
  93:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 283              		.loc 1 93 93 is_stmt 0 view .LVU57
 284 0008 0E46     		mov	r6, r1
 285              		.loc 1 95 5 view .LVU58
 286 000a 1348     		ldr	r0, .L24+4
 287              	.LVL18:
 288              		.loc 1 95 5 view .LVU59
 289 000c 1349     		ldr	r1, .L24+8
 290              	.LVL19:
  93:platforms/chibios/drivers/i2c_master.c ****     i2c_address = address;
 291              		.loc 1 93 93 view .LVU60
 292 000e 1746     		mov	r7, r2
 293 0010 1C46     		mov	r4, r3
 294              		.loc 1 95 5 view .LVU61
 295 0012 FFF7FEFF 		bl	i2cStart
 296              	.LVL20:
  96:platforms/chibios/drivers/i2c_master.c ****     msg_t status = i2cMasterReceiveTimeout(&I2C_DRIVER, (i2c_address >> 1), data, length, TIME_MS2I
 297              		.loc 1 96 5 is_stmt 1 view .LVU62
 298              		.loc 1 96 91 is_stmt 0 view .LVU63
 299 0016 42F21073 		movw	r3, #10000
 300 001a 40F2E730 		movw	r0, #999
 301 001e 0021     		movs	r1, #0
 302 0020 E3FB0401 		umlal	r0, r1, r3, r4
 303 0024 4FF47A72 		mov	r2, #1000
 304 0028 0023     		movs	r3, #0
 305 002a FFF7FEFF 		bl	__aeabi_uldivmod
 306              	.LVL21:
 307              		.loc 1 96 20 view .LVU64
 308 002e 2D78     		ldrb	r5, [r5]	@ zero_extendqisi2
 309 0030 0090     		str	r0, [sp]
 310 0032 6D08     		lsrs	r5, r5, #1
 311 0034 0848     		ldr	r0, .L24+4
 312 0036 3B46     		mov	r3, r7
 313 0038 3246     		mov	r2, r6
 314 003a 2946     		mov	r1, r5
 315 003c FFF7FEFF 		bl	i2cMasterReceiveTimeout
 316              	.LVL22:
  97:platforms/chibios/drivers/i2c_master.c ****     return chibios_to_qmk(&status);
 317              		.loc 1 97 5 is_stmt 1 view .LVU65
 318              	.LBB18:
 319              	.LBI18:
  48:platforms/chibios/drivers/i2c_master.c ****     switch (*status) {
 320              		.loc 1 48 21 view .LVU66
 321              	.LBB19:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 322              		.loc 1 49 5 view .LVU67
 323 0040 28B1     		cbz	r0, .L20
 324 0042 2028     		cmp	r0, #32
 325 0044 14BF     		ite	ne
 326 0046 4FF0FF30 		movne	r0, #-1
 327              	.LVL23:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 328              		.loc 1 49 5 is_stmt 0 view .LVU68
 329 004a 6FF00100 		mvneq	r0, #1
 330              	.L20:
 331              	.LVL24:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 332              		.loc 1 49 5 view .LVU69
 333              	.LBE19:
 334              	.LBE18:
  98:platforms/chibios/drivers/i2c_master.c **** }
 335              		.loc 1 98 1 view .LVU70
 336 004e 03B0     		add	sp, sp, #12
 337              		.cfi_def_cfa_offset 20
 338              		@ sp needed
 339 0050 F0BD     		pop	{r4, r5, r6, r7, pc}
 340              	.LVL25:
 341              	.L25:
 342              		.loc 1 98 1 view .LVU71
 343 0052 00BF     		.align	2
 344              	.L24:
 345 0054 00000000 		.word	.LANCHOR1
 346 0058 00000000 		.word	I2CD1
 347 005c 00000000 		.word	.LANCHOR2
 348              		.cfi_endproc
 349              	.LFE299:
 351              		.section	.text.i2c_writeReg,"ax",%progbits
 352              		.align	1
 353              		.p2align 2,,3
 354              		.global	i2c_writeReg
 355              		.syntax unified
 356              		.thumb
 357              		.thumb_func
 358              		.fpu fpv4-sp-d16
 360              	i2c_writeReg:
 361              	.LVL26:
 362              	.LFB300:
  99:platforms/chibios/drivers/i2c_master.c **** 
 100:platforms/chibios/drivers/i2c_master.c **** i2c_status_t i2c_writeReg(uint8_t devaddr, uint8_t regaddr, const uint8_t* data, uint16_t length, u
 363              		.loc 1 100 117 is_stmt 1 view -0
 364              		.cfi_startproc
 365              		@ args = 4, pretend = 0, frame = 0
 366              		@ frame_needed = 1, uses_anonymous_args = 0
 101:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 367              		.loc 1 101 5 view .LVU73
 100:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 368              		.loc 1 100 117 is_stmt 0 view .LVU74
 369 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 370              		.cfi_def_cfa_offset 36
 371              		.cfi_offset 4, -36
 372              		.cfi_offset 5, -32
 373              		.cfi_offset 6, -28
 374              		.cfi_offset 7, -24
 375              		.cfi_offset 8, -20
 376              		.cfi_offset 9, -16
 377              		.cfi_offset 10, -12
 378              		.cfi_offset 11, -8
 379              		.cfi_offset 14, -4
 380              		.loc 1 101 17 view .LVU75
 381 0004 DFF890A0 		ldr	r10, .L35+8
 100:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 382              		.loc 1 100 117 view .LVU76
 383 0008 85B0     		sub	sp, sp, #20
 384              		.cfi_def_cfa_offset 56
 385 000a 04AF     		add	r7, sp, #16
 386              		.cfi_def_cfa 7, 40
 100:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 387              		.loc 1 100 117 view .LVU77
 388 000c 1C46     		mov	r4, r3
 389              		.loc 1 101 17 view .LVU78
 390 000e 8AF80000 		strb	r0, [r10]
 102:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 391              		.loc 1 102 5 is_stmt 1 view .LVU79
 100:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 392              		.loc 1 100 117 is_stmt 0 view .LVU80
 393 0012 0D46     		mov	r5, r1
 394              		.loc 1 102 5 view .LVU81
 395 0014 1E48     		ldr	r0, .L35
 396              	.LVL27:
 397              		.loc 1 102 5 view .LVU82
 398 0016 1F49     		ldr	r1, .L35+4
 399              	.LVL28:
 100:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 400              		.loc 1 100 117 view .LVU83
 401 0018 3E8D     		ldrh	r6, [r7, #40]
 402 001a 9346     		mov	fp, r2
 403              		.loc 1 102 5 view .LVU84
 404 001c FFF7FEFF 		bl	i2cStart
 405              	.LVL29:
 103:platforms/chibios/drivers/i2c_master.c **** 
 104:platforms/chibios/drivers/i2c_master.c ****     uint8_t complete_packet[length + 1];
 406              		.loc 1 104 5 is_stmt 1 view .LVU85
 407              		.loc 1 104 13 is_stmt 0 view .LVU86
 408 0020 04F10803 		add	r3, r4, #8
 409 0024 6A46     		mov	r2, sp
 410 0026 DB08     		lsrs	r3, r3, #3
 411 0028 A2EBC303 		sub	r3, r2, r3, lsl #3
 412 002c 9D46     		mov	sp, r3
 413              		.loc 1 104 36 view .LVU87
 414 002e 04F10108 		add	r8, r4, #1
 415              		.loc 1 104 13 view .LVU88
 416 0032 0DF11009 		add	r9, sp, #16
 417              	.LVL30:
 105:platforms/chibios/drivers/i2c_master.c ****     for (uint16_t i = 0; i < length; i++) {
 418              		.loc 1 105 5 is_stmt 1 view .LVU89
 419              	.LBB20:
 420              		.loc 1 105 10 view .LVU90
 421              		.loc 1 105 26 view .LVU91
 422              		.loc 1 105 5 is_stmt 0 view .LVU92
 423 0036 2CB1     		cbz	r4, .L27
 106:platforms/chibios/drivers/i2c_master.c ****         complete_packet[i + 1] = data[i];
 424              		.loc 1 106 32 view .LVU93
 425 0038 2246     		mov	r2, r4
 426 003a 5946     		mov	r1, fp
 427 003c 0DF11100 		add	r0, sp, #17
 428 0040 FFF7FEFF 		bl	memcpy
 429              	.LVL31:
 430              	.L27:
 431              		.loc 1 106 32 view .LVU94
 432              	.LBE20:
 107:platforms/chibios/drivers/i2c_master.c ****     }
 108:platforms/chibios/drivers/i2c_master.c ****     complete_packet[0] = regaddr;
 433              		.loc 1 108 5 is_stmt 1 view .LVU95
 434              		.loc 1 108 24 is_stmt 0 view .LVU96
 435 0044 89F80050 		strb	r5, [r9]
 109:platforms/chibios/drivers/i2c_master.c **** 
 110:platforms/chibios/drivers/i2c_master.c ****     msg_t status = i2cMasterTransmitTimeout(&I2C_DRIVER, (i2c_address >> 1), complete_packet, lengt
 436              		.loc 1 110 5 is_stmt 1 view .LVU97
 437              		.loc 1 110 113 is_stmt 0 view .LVU98
 438 0048 0025     		movs	r5, #0
 439 004a 42F21073 		movw	r3, #10000
 440 004e 40F2E730 		movw	r0, #999
 441 0052 2946     		mov	r1, r5
 442 0054 E3FB0601 		umlal	r0, r1, r3, r6
 443 0058 4FF47A72 		mov	r2, #1000
 444 005c 0023     		movs	r3, #0
 445 005e FFF7FEFF 		bl	__aeabi_uldivmod
 446              	.LVL32:
 447              		.loc 1 110 20 view .LVU99
 448 0062 9AF80040 		ldrb	r4, [r10]	@ zero_extendqisi2
 449              	.LVL33:
 450              		.loc 1 110 20 view .LVU100
 451 0066 0290     		str	r0, [sp, #8]
 452 0068 6408     		lsrs	r4, r4, #1
 453 006a 0948     		ldr	r0, .L35
 454 006c 0195     		str	r5, [sp, #4]
 455 006e 0095     		str	r5, [sp]
 456 0070 4346     		mov	r3, r8
 457 0072 4A46     		mov	r2, r9
 458 0074 2146     		mov	r1, r4
 459 0076 FFF7FEFF 		bl	i2cMasterTransmitTimeout
 460              	.LVL34:
 111:platforms/chibios/drivers/i2c_master.c ****     return chibios_to_qmk(&status);
 461              		.loc 1 111 5 is_stmt 1 view .LVU101
 462              	.LBB21:
 463              	.LBI21:
  48:platforms/chibios/drivers/i2c_master.c ****     switch (*status) {
 464              		.loc 1 48 21 view .LVU102
 465              	.LBB22:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 466              		.loc 1 49 5 view .LVU103
 467 007a 28B1     		cbz	r0, .L28
 468 007c 2028     		cmp	r0, #32
 469 007e 14BF     		ite	ne
 470 0080 4FF0FF30 		movne	r0, #-1
 471              	.LVL35:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 472              		.loc 1 49 5 is_stmt 0 view .LVU104
 473 0084 6FF00100 		mvneq	r0, #1
 474              	.L28:
 475              	.LVL36:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 476              		.loc 1 49 5 view .LVU105
 477              	.LBE22:
 478              	.LBE21:
 112:platforms/chibios/drivers/i2c_master.c **** }
 479              		.loc 1 112 1 view .LVU106
 480 0088 0437     		adds	r7, r7, #4
 481              		.cfi_def_cfa_offset 36
 482 008a BD46     		mov	sp, r7
 483              		.cfi_def_cfa_register 13
 484              		@ sp needed
 485 008c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 486              	.LVL37:
 487              	.L36:
 488              		.loc 1 112 1 view .LVU107
 489              		.align	2
 490              	.L35:
 491 0090 00000000 		.word	I2CD1
 492 0094 00000000 		.word	.LANCHOR2
 493 0098 00000000 		.word	.LANCHOR1
 494              		.cfi_endproc
 495              	.LFE300:
 497              		.section	.text.i2c_writeReg16,"ax",%progbits
 498              		.align	1
 499              		.p2align 2,,3
 500              		.global	i2c_writeReg16
 501              		.syntax unified
 502              		.thumb
 503              		.thumb_func
 504              		.fpu fpv4-sp-d16
 506              	i2c_writeReg16:
 507              	.LVL38:
 508              	.LFB301:
 113:platforms/chibios/drivers/i2c_master.c **** 
 114:platforms/chibios/drivers/i2c_master.c **** i2c_status_t i2c_writeReg16(uint8_t devaddr, uint16_t regaddr, const uint8_t* data, uint16_t length
 509              		.loc 1 114 120 is_stmt 1 view -0
 510              		.cfi_startproc
 511              		@ args = 4, pretend = 0, frame = 0
 512              		@ frame_needed = 1, uses_anonymous_args = 0
 115:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 513              		.loc 1 115 5 view .LVU109
 114:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 514              		.loc 1 114 120 is_stmt 0 view .LVU110
 515 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 516              		.cfi_def_cfa_offset 36
 517              		.cfi_offset 4, -36
 518              		.cfi_offset 5, -32
 519              		.cfi_offset 6, -28
 520              		.cfi_offset 7, -24
 521              		.cfi_offset 8, -20
 522              		.cfi_offset 9, -16
 523              		.cfi_offset 10, -12
 524              		.cfi_offset 11, -8
 525              		.cfi_offset 14, -4
 526              		.loc 1 115 17 view .LVU111
 527 0004 DFF894A0 		ldr	r10, .L46+8
 114:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 528              		.loc 1 114 120 view .LVU112
 529 0008 85B0     		sub	sp, sp, #20
 530              		.cfi_def_cfa_offset 56
 531 000a 04AF     		add	r7, sp, #16
 532              		.cfi_def_cfa 7, 40
 114:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 533              		.loc 1 114 120 view .LVU113
 534 000c 1C46     		mov	r4, r3
 535              		.loc 1 115 17 view .LVU114
 536 000e 8AF80000 		strb	r0, [r10]
 116:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 537              		.loc 1 116 5 is_stmt 1 view .LVU115
 114:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 538              		.loc 1 114 120 is_stmt 0 view .LVU116
 539 0012 0D46     		mov	r5, r1
 540              		.loc 1 116 5 view .LVU117
 541 0014 1F48     		ldr	r0, .L46
 542              	.LVL39:
 543              		.loc 1 116 5 view .LVU118
 544 0016 2049     		ldr	r1, .L46+4
 545              	.LVL40:
 114:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 546              		.loc 1 114 120 view .LVU119
 547 0018 B7F82880 		ldrh	r8, [r7, #40]
 548 001c 9346     		mov	fp, r2
 549              		.loc 1 116 5 view .LVU120
 550 001e FFF7FEFF 		bl	i2cStart
 551              	.LVL41:
 117:platforms/chibios/drivers/i2c_master.c **** 
 118:platforms/chibios/drivers/i2c_master.c ****     uint8_t complete_packet[length + 2];
 552              		.loc 1 118 5 is_stmt 1 view .LVU121
 553              		.loc 1 118 13 is_stmt 0 view .LVU122
 554 0022 04F10903 		add	r3, r4, #9
 555 0026 6A46     		mov	r2, sp
 556 0028 DB08     		lsrs	r3, r3, #3
 557 002a A2EBC303 		sub	r3, r2, r3, lsl #3
 558 002e 9D46     		mov	sp, r3
 559              		.loc 1 118 36 view .LVU123
 560 0030 04F10209 		add	r9, r4, #2
 561              		.loc 1 118 13 view .LVU124
 562 0034 04AE     		add	r6, sp, #16
 563              	.LVL42:
 119:platforms/chibios/drivers/i2c_master.c ****     for (uint16_t i = 0; i < length; i++) {
 564              		.loc 1 119 5 is_stmt 1 view .LVU125
 565              	.LBB23:
 566              		.loc 1 119 10 view .LVU126
 567              		.loc 1 119 26 view .LVU127
 568              		.loc 1 119 5 is_stmt 0 view .LVU128
 569 0036 2CB1     		cbz	r4, .L38
 120:platforms/chibios/drivers/i2c_master.c ****         complete_packet[i + 2] = data[i];
 570              		.loc 1 120 32 view .LVU129
 571 0038 2246     		mov	r2, r4
 572 003a 5946     		mov	r1, fp
 573 003c 0DF11200 		add	r0, sp, #18
 574 0040 FFF7FEFF 		bl	memcpy
 575              	.LVL43:
 576              	.L38:
 577              		.loc 1 120 32 view .LVU130
 578              	.LBE23:
 121:platforms/chibios/drivers/i2c_master.c ****     }
 122:platforms/chibios/drivers/i2c_master.c ****     complete_packet[0] = regaddr >> 8;
 579              		.loc 1 122 5 is_stmt 1 view .LVU131
 580              		.loc 1 122 24 is_stmt 0 view .LVU132
 581 0044 2B0A     		lsrs	r3, r5, #8
 123:platforms/chibios/drivers/i2c_master.c ****     complete_packet[1] = regaddr & 0xFF;
 582              		.loc 1 123 24 view .LVU133
 583 0046 7570     		strb	r5, [r6, #1]
 124:platforms/chibios/drivers/i2c_master.c **** 
 125:platforms/chibios/drivers/i2c_master.c ****     msg_t status = i2cMasterTransmitTimeout(&I2C_DRIVER, (i2c_address >> 1), complete_packet, lengt
 584              		.loc 1 125 113 view .LVU134
 585 0048 0025     		movs	r5, #0
 122:platforms/chibios/drivers/i2c_master.c ****     complete_packet[1] = regaddr & 0xFF;
 586              		.loc 1 122 24 view .LVU135
 587 004a 3370     		strb	r3, [r6]
 123:platforms/chibios/drivers/i2c_master.c ****     complete_packet[1] = regaddr & 0xFF;
 588              		.loc 1 123 5 is_stmt 1 view .LVU136
 589              		.loc 1 125 5 view .LVU137
 590              		.loc 1 125 113 is_stmt 0 view .LVU138
 591 004c 40F2E730 		movw	r0, #999
 592 0050 42F21073 		movw	r3, #10000
 593 0054 2946     		mov	r1, r5
 594 0056 E3FB0801 		umlal	r0, r1, r3, r8
 595 005a 4FF47A72 		mov	r2, #1000
 596 005e 0023     		movs	r3, #0
 597 0060 FFF7FEFF 		bl	__aeabi_uldivmod
 598              	.LVL44:
 599              		.loc 1 125 20 view .LVU139
 600 0064 9AF80040 		ldrb	r4, [r10]	@ zero_extendqisi2
 601              	.LVL45:
 602              		.loc 1 125 20 view .LVU140
 603 0068 0290     		str	r0, [sp, #8]
 604 006a 6408     		lsrs	r4, r4, #1
 605 006c 0948     		ldr	r0, .L46
 606 006e 0195     		str	r5, [sp, #4]
 607 0070 0095     		str	r5, [sp]
 608 0072 4B46     		mov	r3, r9
 609 0074 3246     		mov	r2, r6
 610 0076 2146     		mov	r1, r4
 611 0078 FFF7FEFF 		bl	i2cMasterTransmitTimeout
 612              	.LVL46:
 126:platforms/chibios/drivers/i2c_master.c ****     return chibios_to_qmk(&status);
 613              		.loc 1 126 5 is_stmt 1 view .LVU141
 614              	.LBB24:
 615              	.LBI24:
  48:platforms/chibios/drivers/i2c_master.c ****     switch (*status) {
 616              		.loc 1 48 21 view .LVU142
 617              	.LBB25:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 618              		.loc 1 49 5 view .LVU143
 619 007c 28B1     		cbz	r0, .L39
 620 007e 2028     		cmp	r0, #32
 621 0080 14BF     		ite	ne
 622 0082 4FF0FF30 		movne	r0, #-1
 623              	.LVL47:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 624              		.loc 1 49 5 is_stmt 0 view .LVU144
 625 0086 6FF00100 		mvneq	r0, #1
 626              	.L39:
 627              	.LVL48:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 628              		.loc 1 49 5 view .LVU145
 629              	.LBE25:
 630              	.LBE24:
 127:platforms/chibios/drivers/i2c_master.c **** }
 631              		.loc 1 127 1 view .LVU146
 632 008a 0437     		adds	r7, r7, #4
 633              		.cfi_def_cfa_offset 36
 634 008c BD46     		mov	sp, r7
 635              		.cfi_def_cfa_register 13
 636              		@ sp needed
 637 008e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 638              	.LVL49:
 639              	.L47:
 640              		.loc 1 127 1 view .LVU147
 641 0092 00BF     		.align	2
 642              	.L46:
 643 0094 00000000 		.word	I2CD1
 644 0098 00000000 		.word	.LANCHOR2
 645 009c 00000000 		.word	.LANCHOR1
 646              		.cfi_endproc
 647              	.LFE301:
 649              		.section	.text.i2c_readReg,"ax",%progbits
 650              		.align	1
 651              		.p2align 2,,3
 652              		.global	i2c_readReg
 653              		.syntax unified
 654              		.thumb
 655              		.thumb_func
 656              		.fpu fpv4-sp-d16
 658              	i2c_readReg:
 659              	.LVL50:
 660              	.LFB302:
 128:platforms/chibios/drivers/i2c_master.c **** 
 129:platforms/chibios/drivers/i2c_master.c **** i2c_status_t i2c_readReg(uint8_t devaddr, uint8_t regaddr, uint8_t* data, uint16_t length, uint16_t
 661              		.loc 1 129 110 is_stmt 1 view -0
 662              		.cfi_startproc
 663              		@ args = 4, pretend = 0, frame = 8
 664              		@ frame_needed = 0, uses_anonymous_args = 0
 130:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 665              		.loc 1 130 5 view .LVU149
 129:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 666              		.loc 1 129 110 is_stmt 0 view .LVU150
 667 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 668              		.cfi_def_cfa_offset 20
 669              		.cfi_offset 4, -20
 670              		.cfi_offset 5, -16
 671              		.cfi_offset 6, -12
 672              		.cfi_offset 7, -8
 673              		.cfi_offset 14, -4
 674              		.loc 1 130 17 view .LVU151
 675 0002 174C     		ldr	r4, .L53
 129:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 676              		.loc 1 129 110 view .LVU152
 677 0004 87B0     		sub	sp, sp, #28
 678              		.cfi_def_cfa_offset 48
 679              		.loc 1 130 17 view .LVU153
 680 0006 2070     		strb	r0, [r4]
 131:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 681              		.loc 1 131 5 is_stmt 1 view .LVU154
 129:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 682              		.loc 1 129 110 is_stmt 0 view .LVU155
 683 0008 BDF83070 		ldrh	r7, [sp, #48]
 684              		.loc 1 131 5 view .LVU156
 685 000c 1548     		ldr	r0, .L53+4
 686              	.LVL51:
 129:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 687              		.loc 1 129 110 view .LVU157
 688 000e 8DF81710 		strb	r1, [sp, #23]
 689              		.loc 1 131 5 view .LVU158
 690 0012 1549     		ldr	r1, .L53+8
 691              	.LVL52:
 129:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 692              		.loc 1 129 110 view .LVU159
 693 0014 1546     		mov	r5, r2
 694 0016 1E46     		mov	r6, r3
 695              		.loc 1 131 5 view .LVU160
 696 0018 FFF7FEFF 		bl	i2cStart
 697              	.LVL53:
 132:platforms/chibios/drivers/i2c_master.c ****     msg_t status = i2cMasterTransmitTimeout(&I2C_DRIVER, (i2c_address >> 1), &regaddr, 1, data, len
 698              		.loc 1 132 5 is_stmt 1 view .LVU161
 699              		.loc 1 132 105 is_stmt 0 view .LVU162
 700 001c 42F21073 		movw	r3, #10000
 701 0020 40F2E730 		movw	r0, #999
 702 0024 0021     		movs	r1, #0
 703 0026 E3FB0701 		umlal	r0, r1, r3, r7
 704 002a 4FF47A72 		mov	r2, #1000
 705 002e 0023     		movs	r3, #0
 706 0030 FFF7FEFF 		bl	__aeabi_uldivmod
 707              	.LVL54:
 708              		.loc 1 132 20 view .LVU163
 709 0034 2478     		ldrb	r4, [r4]	@ zero_extendqisi2
 710 0036 0290     		str	r0, [sp, #8]
 711 0038 6408     		lsrs	r4, r4, #1
 712 003a 0A48     		ldr	r0, .L53+4
 713 003c 0196     		str	r6, [sp, #4]
 714 003e 0095     		str	r5, [sp]
 715 0040 0123     		movs	r3, #1
 716 0042 0DF11702 		add	r2, sp, #23
 717 0046 2146     		mov	r1, r4
 718 0048 FFF7FEFF 		bl	i2cMasterTransmitTimeout
 719              	.LVL55:
 133:platforms/chibios/drivers/i2c_master.c ****     return chibios_to_qmk(&status);
 720              		.loc 1 133 5 is_stmt 1 view .LVU164
 721              	.LBB26:
 722              	.LBI26:
  48:platforms/chibios/drivers/i2c_master.c ****     switch (*status) {
 723              		.loc 1 48 21 view .LVU165
 724              	.LBB27:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 725              		.loc 1 49 5 view .LVU166
 726 004c 28B1     		cbz	r0, .L49
 727 004e 2028     		cmp	r0, #32
 728 0050 14BF     		ite	ne
 729 0052 4FF0FF30 		movne	r0, #-1
 730              	.LVL56:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 731              		.loc 1 49 5 is_stmt 0 view .LVU167
 732 0056 6FF00100 		mvneq	r0, #1
 733              	.L49:
 734              	.LVL57:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 735              		.loc 1 49 5 view .LVU168
 736              	.LBE27:
 737              	.LBE26:
 134:platforms/chibios/drivers/i2c_master.c **** }
 738              		.loc 1 134 1 view .LVU169
 739 005a 07B0     		add	sp, sp, #28
 740              		.cfi_def_cfa_offset 20
 741              		@ sp needed
 742 005c F0BD     		pop	{r4, r5, r6, r7, pc}
 743              	.LVL58:
 744              	.L54:
 745              		.loc 1 134 1 view .LVU170
 746 005e 00BF     		.align	2
 747              	.L53:
 748 0060 00000000 		.word	.LANCHOR1
 749 0064 00000000 		.word	I2CD1
 750 0068 00000000 		.word	.LANCHOR2
 751              		.cfi_endproc
 752              	.LFE302:
 754              		.section	.text.i2c_readReg16,"ax",%progbits
 755              		.align	1
 756              		.p2align 2,,3
 757              		.global	i2c_readReg16
 758              		.syntax unified
 759              		.thumb
 760              		.thumb_func
 761              		.fpu fpv4-sp-d16
 763              	i2c_readReg16:
 764              	.LVL59:
 765              	.LFB303:
 135:platforms/chibios/drivers/i2c_master.c **** 
 136:platforms/chibios/drivers/i2c_master.c **** i2c_status_t i2c_readReg16(uint8_t devaddr, uint16_t regaddr, uint8_t* data, uint16_t length, uint1
 766              		.loc 1 136 113 is_stmt 1 view -0
 767              		.cfi_startproc
 768              		@ args = 4, pretend = 0, frame = 8
 769              		@ frame_needed = 0, uses_anonymous_args = 0
 137:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 770              		.loc 1 137 5 view .LVU172
 136:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 771              		.loc 1 136 113 is_stmt 0 view .LVU173
 772 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 773              		.cfi_def_cfa_offset 24
 774              		.cfi_offset 4, -24
 775              		.cfi_offset 5, -20
 776              		.cfi_offset 6, -16
 777              		.cfi_offset 7, -12
 778              		.cfi_offset 8, -8
 779              		.cfi_offset 14, -4
 780              		.loc 1 137 17 view .LVU174
 781 0004 DFF87080 		ldr	r8, .L60+8
 136:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 782              		.loc 1 136 113 view .LVU175
 783 0008 86B0     		sub	sp, sp, #24
 784              		.cfi_def_cfa_offset 48
 136:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 785              		.loc 1 136 113 view .LVU176
 786 000a 0C46     		mov	r4, r1
 787              		.loc 1 137 17 view .LVU177
 788 000c 88F80000 		strb	r0, [r8]
 138:platforms/chibios/drivers/i2c_master.c ****     i2cStart(&I2C_DRIVER, &i2cconfig);
 789              		.loc 1 138 5 is_stmt 1 view .LVU178
 790 0010 1749     		ldr	r1, .L60
 791              	.LVL60:
 792              		.loc 1 138 5 is_stmt 0 view .LVU179
 793 0012 1848     		ldr	r0, .L60+4
 794              	.LVL61:
 136:platforms/chibios/drivers/i2c_master.c ****     i2c_address = devaddr;
 795              		.loc 1 136 113 view .LVU180
 796 0014 BDF83070 		ldrh	r7, [sp, #48]
 797 0018 1546     		mov	r5, r2
 798 001a 1E46     		mov	r6, r3
 799              		.loc 1 138 5 view .LVU181
 800 001c FFF7FEFF 		bl	i2cStart
 801              	.LVL62:
 139:platforms/chibios/drivers/i2c_master.c ****     uint8_t register_packet[2] = {regaddr >> 8, regaddr & 0xFF};
 802              		.loc 1 139 5 is_stmt 1 view .LVU182
 140:platforms/chibios/drivers/i2c_master.c ****     msg_t   status             = i2cMasterTransmitTimeout(&I2C_DRIVER, (i2c_address >> 1), register
 803              		.loc 1 140 34 is_stmt 0 view .LVU183
 804 0020 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 139:platforms/chibios/drivers/i2c_master.c ****     uint8_t register_packet[2] = {regaddr >> 8, regaddr & 0xFF};
 805              		.loc 1 139 13 view .LVU184
 806 0024 8DF81540 		strb	r4, [sp, #21]
 807              		.loc 1 140 5 is_stmt 1 view .LVU185
 139:platforms/chibios/drivers/i2c_master.c ****     uint8_t register_packet[2] = {regaddr >> 8, regaddr & 0xFF};
 808              		.loc 1 139 13 is_stmt 0 view .LVU186
 809 0028 240A     		lsrs	r4, r4, #8
 810 002a 8DF81440 		strb	r4, [sp, #20]
 811              		.loc 1 140 126 view .LVU187
 812 002e 40F2E730 		movw	r0, #999
 813              		.loc 1 140 34 view .LVU188
 814 0032 5C08     		lsrs	r4, r3, #1
 815              		.loc 1 140 126 view .LVU189
 816 0034 0021     		movs	r1, #0
 817 0036 42F21073 		movw	r3, #10000
 818 003a E3FB0701 		umlal	r0, r1, r3, r7
 819 003e 4FF47A72 		mov	r2, #1000
 820 0042 0023     		movs	r3, #0
 821 0044 FFF7FEFF 		bl	__aeabi_uldivmod
 822              	.LVL63:
 823              		.loc 1 140 34 view .LVU190
 824 0048 0196     		str	r6, [sp, #4]
 825 004a 0290     		str	r0, [sp, #8]
 826 004c 0095     		str	r5, [sp]
 827 004e 0948     		ldr	r0, .L60+4
 828 0050 0223     		movs	r3, #2
 829 0052 05AA     		add	r2, sp, #20
 830 0054 2146     		mov	r1, r4
 831 0056 FFF7FEFF 		bl	i2cMasterTransmitTimeout
 832              	.LVL64:
 141:platforms/chibios/drivers/i2c_master.c ****     return chibios_to_qmk(&status);
 833              		.loc 1 141 5 is_stmt 1 view .LVU191
 834              	.LBB28:
 835              	.LBI28:
  48:platforms/chibios/drivers/i2c_master.c ****     switch (*status) {
 836              		.loc 1 48 21 view .LVU192
 837              	.LBB29:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 838              		.loc 1 49 5 view .LVU193
 839 005a 28B1     		cbz	r0, .L56
 840 005c 2028     		cmp	r0, #32
 841 005e 14BF     		ite	ne
 842 0060 4FF0FF30 		movne	r0, #-1
 843              	.LVL65:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 844              		.loc 1 49 5 is_stmt 0 view .LVU194
 845 0064 6FF00100 		mvneq	r0, #1
 846              	.L56:
 847              	.LVL66:
  49:platforms/chibios/drivers/i2c_master.c ****         case I2C_NO_ERROR:
 848              		.loc 1 49 5 view .LVU195
 849              	.LBE29:
 850              	.LBE28:
 142:platforms/chibios/drivers/i2c_master.c **** }
 851              		.loc 1 142 1 view .LVU196
 852 0068 06B0     		add	sp, sp, #24
 853              		.cfi_def_cfa_offset 24
 854              		@ sp needed
 855 006a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 856              	.LVL67:
 857              	.L61:
 858              		.loc 1 142 1 view .LVU197
 859 006e 00BF     		.align	2
 860              	.L60:
 861 0070 00000000 		.word	.LANCHOR2
 862 0074 00000000 		.word	I2CD1
 863 0078 00000000 		.word	.LANCHOR1
 864              		.cfi_endproc
 865              	.LFE303:
 867              		.section	.text.i2c_stop,"ax",%progbits
 868              		.align	1
 869              		.p2align 2,,3
 870              		.global	i2c_stop
 871              		.syntax unified
 872              		.thumb
 873              		.thumb_func
 874              		.fpu fpv4-sp-d16
 876              	i2c_stop:
 877              	.LFB304:
 143:platforms/chibios/drivers/i2c_master.c **** 
 144:platforms/chibios/drivers/i2c_master.c **** void i2c_stop(void) { i2cStop(&I2C_DRIVER); }
 878              		.loc 1 144 21 is_stmt 1 view -0
 879              		.cfi_startproc
 880              		@ args = 0, pretend = 0, frame = 0
 881              		@ frame_needed = 0, uses_anonymous_args = 0
 882              		@ link register save eliminated.
 883              		.loc 1 144 23 view .LVU199
 884 0000 0148     		ldr	r0, .L63
 885 0002 FFF7FEBF 		b	i2cStop
 886              	.LVL68:
 887              	.L64:
 888 0006 00BF     		.align	2
 889              	.L63:
 890 0008 00000000 		.word	I2CD1
 891              		.cfi_endproc
 892              	.LFE304:
 894              		.section	.bss.i2c_address,"aw",%nobits
 895              		.set	.LANCHOR1,. + 0
 898              	i2c_address:
 899 0000 00       		.space	1
 900              		.section	.bss.is_initialised.0,"aw",%nobits
 901              		.set	.LANCHOR0,. + 0
 904              	is_initialised.0:
 905 0000 00       		.space	1
 906              		.section	.rodata.i2cconfig,"a"
 907              		.align	2
 908              		.set	.LANCHOR2,. + 0
 911              	i2cconfig:
 912 0000 81267000 		.word	7349889
 913 0004 00000000 		.word	0
 914 0008 00000000 		.word	0
 915              		.text
 916              	.Letext0:
 917              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 918              		.file 3 "./lib/chibios/os/common/ports/ARMCMx/compilers/GCC/chtypes.h"
 919              		.file 4 "./lib/chibios/os/rt/include/chsystypes.h"
 920              		.file 5 "./lib/chibios/os/rt/include/chschd.h"
 921              		.file 6 "./lib/chibios/os/rt/include/chlists.h"
 922              		.file 7 "./lib/chibios/os/rt/include/chtime.h"
 923              		.file 8 "./lib/chibios/os/common/ext/ST/STM32F3xx/stm32f303xc.h"
 924              		.file 9 "./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h"
 925              		.file 10 "./lib/chibios/os/rt/include/chsem.h"
 926              		.file 11 "./lib/chibios/os/rt/include/chmtx.h"
 927              		.file 12 "./lib/chibios/os/hal/ports/STM32/LLD/DMAv1/stm32_dma.h"
 928              		.file 13 "./lib/chibios/os/hal/ports/STM32/LLD/GPIOv2/stm32_gpio.h"
 929              		.file 14 "./lib/chibios/os/hal/ports/STM32/LLD/GPIOv2/hal_pal_lld.h"
 930              		.file 15 "./lib/chibios/os/hal/include/hal_i2c.h"
 931              		.file 16 "./lib/chibios/os/hal/ports/STM32/LLD/I2Cv2/hal_i2c_lld.h"
 932              		.file 17 "quantum/sequencer/sequencer.h"
 933              		.file 18 "platforms/chibios/drivers/i2c_master.h"
 934              		.file 19 "./lib/chibios/os/rt/include/chthreads.h"
 935              		.file 20 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 i2c_master.c
     /tmp/ccdLZv0E.s:16     .text.i2c_init:0000000000000000 $t
     /tmp/ccdLZv0E.s:25     .text.i2c_init:0000000000000000 i2c_init
     /tmp/ccdLZv0E.s:88     .text.i2c_init:0000000000000044 $d
     /tmp/ccdLZv0E.s:94     .text.i2c_start:0000000000000000 $t
     /tmp/ccdLZv0E.s:102    .text.i2c_start:0000000000000000 i2c_start
     /tmp/ccdLZv0E.s:136    .text.i2c_start:0000000000000014 $d
     /tmp/ccdLZv0E.s:145    .text.i2c_transmit:0000000000000000 $t
     /tmp/ccdLZv0E.s:153    .text.i2c_transmit:0000000000000000 i2c_transmit
     /tmp/ccdLZv0E.s:244    .text.i2c_transmit:0000000000000064 $d
     /tmp/ccdLZv0E.s:251    .text.i2c_receive:0000000000000000 $t
     /tmp/ccdLZv0E.s:259    .text.i2c_receive:0000000000000000 i2c_receive
     /tmp/ccdLZv0E.s:345    .text.i2c_receive:0000000000000054 $d
     /tmp/ccdLZv0E.s:352    .text.i2c_writeReg:0000000000000000 $t
     /tmp/ccdLZv0E.s:360    .text.i2c_writeReg:0000000000000000 i2c_writeReg
     /tmp/ccdLZv0E.s:491    .text.i2c_writeReg:0000000000000090 $d
     /tmp/ccdLZv0E.s:498    .text.i2c_writeReg16:0000000000000000 $t
     /tmp/ccdLZv0E.s:506    .text.i2c_writeReg16:0000000000000000 i2c_writeReg16
     /tmp/ccdLZv0E.s:643    .text.i2c_writeReg16:0000000000000094 $d
     /tmp/ccdLZv0E.s:650    .text.i2c_readReg:0000000000000000 $t
     /tmp/ccdLZv0E.s:658    .text.i2c_readReg:0000000000000000 i2c_readReg
     /tmp/ccdLZv0E.s:748    .text.i2c_readReg:0000000000000060 $d
     /tmp/ccdLZv0E.s:755    .text.i2c_readReg16:0000000000000000 $t
     /tmp/ccdLZv0E.s:763    .text.i2c_readReg16:0000000000000000 i2c_readReg16
     /tmp/ccdLZv0E.s:861    .text.i2c_readReg16:0000000000000070 $d
     /tmp/ccdLZv0E.s:868    .text.i2c_stop:0000000000000000 $t
     /tmp/ccdLZv0E.s:876    .text.i2c_stop:0000000000000000 i2c_stop
     /tmp/ccdLZv0E.s:890    .text.i2c_stop:0000000000000008 $d
     /tmp/ccdLZv0E.s:898    .bss.i2c_address:0000000000000000 i2c_address
     /tmp/ccdLZv0E.s:899    .bss.i2c_address:0000000000000000 $d
     /tmp/ccdLZv0E.s:904    .bss.is_initialised.0:0000000000000000 is_initialised.0
     /tmp/ccdLZv0E.s:905    .bss.is_initialised.0:0000000000000000 $d
     /tmp/ccdLZv0E.s:907    .rodata.i2cconfig:0000000000000000 $d
     /tmp/ccdLZv0E.s:911    .rodata.i2cconfig:0000000000000000 i2cconfig

UNDEFINED SYMBOLS
_pal_lld_setgroupmode
chThdSleep
i2cStart
I2CD1
__aeabi_uldivmod
__aeabi_ldivmod
i2cMasterTransmitTimeout
i2cMasterReceiveTimeout
memcpy
i2cStop
